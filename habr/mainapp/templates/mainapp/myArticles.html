{% extends 'mainapp/base.html' %}
{% load static %}

{% block content %}
    <div class="main">
        <div class="subNavbarLK">
            {% include 'mainapp/includes/inc-submenu_lk.html' %}
        </div>
        <div class="contentArticle">
            <div class="myArticles">
                {% if user.is_authenticated %}
                    {% if object_list and user  == object_list.0.user %}
                        <div class="main">
                            <div class="title">
                                Мои публикации
                            </div>
                            <div class="publications">
                                <div class="my-article-wrapper">
                                    {% for instance_article in object_list %}
                                        <div class="article-box">

                                            <div class="article-tags">
                                                <div {% if instance_article.status == 'D' %}
                                                    style="background-color: #9A9CA5;"
                                                {% endif %}
                                                    class="status">{{ instance_article.get_status_display }}</div>

                                                <div class="category">{{ instance_article.categories }}</div>
                                            </div>


                                            <div class="info-block">
                                                <div class="info">{{ instance_article.created_timestamp | date:"d.m.Y" }}</div>
                                                <div class="info"><img
                                                        src={% static "img/like.png" %}> {{ instance_article.likes.count }}
                                                </div>
                                                <div class="info"><img
                                                        src={% static "img/comment.png" %}> {{ instance_article.get_comment_count_by_article_id }}
                                                </div>
                                                <div class="info"><img src={% static 'img/rating.png' %} alt="like">
                                                    {% if not article.get_rating_by_article_id %}
                                                        0
                                                    {% else %}
                                                        {{ article.get_rating_by_article_id }}
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="article-title">{{ instance_article.title }}</div>
                                            <div class="article-prewiev">{{ instance_article.subtitle }}</div>
                                            <div class="button-box">
                                                <a class="article-button"
                                                   href="{% url 'article_update' instance_article.pk %}">Редактировать</a>
                                                <a class="article-button">Архивировать</a>
                                            </div>
                                        </div>
                                    {% endfor %}


                                    {#                                    {% for instance_article in object_list %}#}
                                    {#                                        <div class="publication">#}
                                    {#                                            <div class="image">#}
                                    {#                                                <img src={{ instance_article.main_img.url }} alt="{{ instance_article.main_img }}">#}
                                    {#                                            </div>#}
                                    {#                                            <div class="publicationInfo">#}
                                    {#                                                <div class="category">#}
                                    {#                                                    {{ instance_article.categories }}#}
                                    {#                                                </div>#}
                                    {#                                                <div class="divider"></div>#}
                                    {#                                                <div class="dateInfo">#}
                                    {#                                                    <div class="icon">#}
                                    {#                                                        <img src={% static 'img/Calendar.png' %} alt="Calendar">#}
                                    {#                                                    </div>#}
                                    {#                                                    <div class="date">#}
                                    {#                                                        {{ instance_article.created_timestamp | date:"d.m.Y" }}#}
                                    {#                                                    </div>#}
                                    {#                                                </div>#}
                                    {#                                                <div class="divider"></div>#}
                                    {#                                                <div class="likeCount">#}
                                    {#                                                    <div class="icon">#}
                                    {#                                                        <img src={% static 'img/rating.png' %} alt="like">#}
                                    {#                                                    </div>#}
                                    {#                                                    <div class="number_rating">#}
                                    {#                                                        {% if not instance_article.get_rating_by_article_id %}#}
                                    {#                                                            0#}
                                    {#                                                        {% else %}#}
                                    {#                                                            {{ instance_article.get_rating_by_article_id }}#}
                                    {#                                                        {% endif %}#}
                                    {#                                                    </div>#}
                                    {#                                                </div>#}
                                    {#                                            </div>#}
                                    {#                                            <div class="title">#}
                                    {#                                                {{ instance_article.title }}#}
                                    {#                                            </div>#}
                                    {#                                            <div class="descrition">#}
                                    {#                                                {{ instance_article.subtitle }}#}
                                    {#                                            </div>#}
                                    {#                                            <div class="continue">#}
                                    {#                                                <div class="text">#}
                                    {#                                                    Просмотреть статью#}
                                    {#                                                </div>#}
                                    {#                                                <div class="icon">#}
                                    {#                                                    <a href="{% url 'article' instance_article.pk %}"><img#}
                                    {#                                                            src={% static 'img/Right.png' %} alt="right"></a>#}
                                    {#                                                </div>#}
                                    {#                                            </div>#}
                                    {#                                            <div class="continue update">#}
                                    {#                                                <div class="text">#}
                                    {#                                                    <a href="{% url 'article_update' instance_article.pk %}">Редактировать#}
                                    {#                                                        статью</a>#}
                                    {#                                                </div>#}
                                    {##}
                                    {#                                            </div>#}
                                    {#                                        </div>#}
                                    {#                                    {% endfor %}#}
                                </div>
                                <div class="paginator">
                                    {% if page_obj.has_previous %}
                                        <div class="pagLeft">
                                            <a href="?page={{ page_obj.previous_page_number }}"><img
                                                    src={% static 'img/pagLeft.png' %}
                                                            alt="left"></a>
                                        </div>
                                    {% endif %}

                                    {% for num_page in page_obj.paginator.page_range %}
                                        <div class="pagNum">
                                            <a {% if num_page == page_obj.number %}
                                                style="color: red; font-weight: bold;"
                                            {% endif %}
                                                href="?page={{ num_page }}">{{ num_page }}</a>
                                        </div>
                                    {% endfor %}

                                    {% if page_obj.has_next %}
                                        <div class="pagRight">
                                            <a href="?page={{ page_obj.next_page_number }}"><img
                                                    src={% static 'img/pagRight.png' %}
                                                            alt="right"></a>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="titleArticleAdd">
                            Для просмотра статей необходимо авторизоваться как автор этих статей
                        </div>
                    {% endif %}
                {% else %}
                    <div class="titleArticleAdd">
                        Для просмотра статей необходимо авторизоваться
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}